#inputs:
#  input_a:
#    type: int
#    default: 0
#  input_b:
#    type: int
#    default: 0
#
#nodes:
#  - name: calculate
#    type: python
#    source:
#      type: code
#      path: calculate.py
#    inputs:
#      a: ${inputs.input_a}
#      b: ${inputs.input_b}
#    outputs:
#      output_sum: ${outputs.result}
#
#outputs:
#  final_result:
#    type: int
#    reference: ${calculate.output_sum}

#inputs:
#  query:
#    type: string
#
#nodes:
#  - name: query_analysis
#    type: llm
#    source:
#      type: prompt
#      template: "分析以下查询的意图和关键要素：{query}"
#    inputs:
#      query: ${inputs.query}
#    provider: openai
#    model: gpt-3.5-turbo
#    connection: openai_connection
#    outputs:
#      output: ${outputs.result}
#
#  - name: response_generation
#    type: llm
#    source:
#      type: prompt
#      template: "基于以下查询分析生成回答：{analysis}"
#    inputs:
#      analysis: ${nodes.query_analysis.output}
#    provider: openai
#    model: gpt-3.5-turbo
#    connection: openai_connection
#    outputs:
#      output: ${outputs.result}
#
#outputs:
#  answer:
#    type: string
#    reference: ${nodes.response_generation.output}


# flow.yaml
inputs:
  query:
    type: string

nodes:
  - name: query_analysis
    type: python
    source:
      path: tools/analyze_query.py
      function: analyze_query
    inputs:
      query: ${inputs.query}
    outputs:
      output: ${outputs.result}

  - name: response_generation
    type: python
    source:
      path: tools/generate_response.py
      function: generate_response
    inputs:
      analysis: ${query_analysis}
    outputs:
      output: ${outputs.result}

outputs:
  answer:
    type: string
    reference: ${response_generation}